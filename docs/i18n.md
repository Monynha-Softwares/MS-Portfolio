# Guia de internacionalização

Este documento descreve a arquitetura de i18n do MS-Portfolio e como contribuir com novas traduções.

## Estrutura

- `i18n.config.ts`: define `locales`, `defaultLocale` e rótulos humanos.
- `middleware.ts`: redireciona URLs sem prefixo e grava o cookie `locale` usado para persistir a escolha do utilizador.
- `src/locales/*.json`: catálogos por idioma. Utilize chaves descritivas (`home.ctaPrimary`) e texto em Português como fonte de verdade.
- `src/lib/i18n/messages.ts`: carrega catálogos, calcula chaves em falta e injecta `__meta.fallbackKeys` para sinalizar fallbacks.
- `src/lib/i18n/format.ts`: utilitários padronizados para formatação de datas, números e moeda com `Intl`.
- `app/[lang]/layout.tsx`: aplica `NextIntlClientProvider`, define `<html lang>` e disponibiliza o `LanguageSwitcher`.
- `app/sitemap.ts`: gera entradas multilíngues com `hreflang`.

## Convenções de tradução

1. **Português (pt-PT)** é a língua de referência. Traduções ausentes noutras línguas usam fallback automático e mostram o badge "Auto-fallback".
2. Utilize mensagens em formato ICU (ex.: `{count, plural, ...}`) para plurais e variações.
3. Evite interpolar HTML diretamente; prefira placeholders (`{name}`) e componha via `t.rich` quando necessário.
4. Antes de enviar novas traduções execute `pnpm test` e `pnpm test:e2e`.

## Checklist de contribuição

- [ ] Adicionar/atualizar chaves nos quatro catálogos (`pt-PT`, `en`, `es`, `fr`).
- [ ] Confirmar que o badge de fallback aparece apenas quando realmente existirem chaves em falta.
- [ ] Atualizar testes ou adicionar novos cenários para cobrir a chave introduzida.
- [ ] Verificar acessibilidade e comportamento com `pnpm test:e2e`.
